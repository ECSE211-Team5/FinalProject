\hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation}{}\section{ca.\+mcgill.\+ecse211.\+project.\+Navigation Class Reference}
\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation}\index{ca.\+mcgill.\+ecse211.\+project.\+Navigation@{ca.\+mcgill.\+ecse211.\+project.\+Navigation}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_aaee14b67c392ddd951e3ce21224c3e56}{Navigation} (E\+V3\+Large\+Regulated\+Motor left\+Motor, E\+V3\+Large\+Regulated\+Motor right\+Motor)  throws Odometer\+Exceptions 
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ab01db7b8a871acd45e7dd16922abc15e}{set\+Slow\+Acc} ()
\item 
double \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d}{calculate\+Angle\+To} (double x, double y)
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3d8354490a2d8c36090d794c25d33421}{travel\+To} (double x, double y, int speed)
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae7230e905494002087416294f12cae6a}{travel\+To\+With\+Correction} (int x, int y, boolean avoid)
\item 
synchronized void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a48eeb9ae2da23664421e8da5642054c7}{move\+With\+Correction} (double distance, double theta)
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9}{move\+One\+Tile\+With\+Correction} (double theta)
\item 
synchronized void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c}{turn\+To} (double angle)
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4b52e605d3ea2f9bcd9481ae2c69ba39}{go\+Through\+Tunnel} ()  throws Exception 
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a1a808e665b8dd5b8e79b0580724d239c}{search\+Ring\+Set} (\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_ring_searcher}{Ring\+Searcher} searcher, boolean correct, boolean reset)
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ad74286ad36d333bfaf57661837457b76}{turn} (int angle)
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward} (int speed, double distance)
\item 
void \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae8530d181ffd790ff9dea5eeab54b1a1}{stop} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12}{convert\+Distance} (double radius, double distance)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Navigator class extends the functionality of the \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation}{Navigation} class. It offers an alternative \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3d8354490a2d8c36090d794c25d33421}{travel\+To()} method which uses a state machine to implement obstacle avoidance.

The Navigator class does not override any of the methods in \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation}{Navigation}. All methods with the same name are overloaded i.\+e. the Navigator version takes different parameters than the \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation}{Navigation} version.

This is useful if, for instance, you want to force travel without obstacle detection over small distances. One place where you might want to do this is in the Obstacle\+Avoidance class. Another place is methods that implement specific features for future milestones such as retrieving an object.

\begin{DoxyAuthor}{Author}
Caspar Cedro 

Percy Chen 

Patrick Erath 

Anssam Ghezala 

Susan Matuszewski 

Kamy Moussavi Kafi 
\end{DoxyAuthor}


Definition at line 30 of file Navigation.\+java.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_aaee14b67c392ddd951e3ce21224c3e56}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_aaee14b67c392ddd951e3ce21224c3e56}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!Navigation@{Navigation}}
\index{Navigation@{Navigation}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{Navigation()}{Navigation()}}
{\footnotesize\ttfamily ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+Navigation (\begin{DoxyParamCaption}\item[{E\+V3\+Large\+Regulated\+Motor}]{left\+Motor,  }\item[{E\+V3\+Large\+Regulated\+Motor}]{right\+Motor }\end{DoxyParamCaption}) throws \hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_exceptions}{Odometer\+Exceptions}}

This navigation class constructor sets up our robot to begin navigating a particular map


\begin{DoxyParams}{Parameters}
{\em left\+Motor} & The E\+V3\+Large\+Regulated\+Motor instance for our left motor \\
\hline
{\em right\+Motor} & The E\+V3\+Large\+Regulated\+Motor instance for our right motor \\
\hline
\end{DoxyParams}


Definition at line 61 of file Navigation.\+java.


\begin{DoxyCode}
62                                 \{
63     this.odometer = Odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_a99171f11e34dea918fa9dd069d721439}{getOdometer}();
64     this.leftMotor = leftMotor;
65     this.rightMotor = rightMotor;
66     this.data = SensorData.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1threads_1_1_sensor_data_a8260aba53b4474ca1275e4ce26157977}{getSensorData}();
67     \textcolor{keywordflow}{for} (EV3LargeRegulatedMotor motor : \textcolor{keyword}{new} EV3LargeRegulatedMotor[] \{this.leftMotor,
68         this.rightMotor\}) \{
69       motor.stop();
70       motor.setAcceleration(Q\_ACCELERATION);
71     \}
72   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_aaee14b67c392ddd951e3ce21224c3e56_cgraph}
\end{center}
\end{figure}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!calculate\+Angle\+To@{calculate\+Angle\+To}}
\index{calculate\+Angle\+To@{calculate\+Angle\+To}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{calculate\+Angle\+To()}{calculateAngleTo()}}
{\footnotesize\ttfamily double ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+calculate\+Angle\+To (\begin{DoxyParamCaption}\item[{double}]{x,  }\item[{double}]{y }\end{DoxyParamCaption})}

This method calculate the angle for the robot to rotate facing certain point


\begin{DoxyParams}{Parameters}
{\em x} & x coordinate of the point \\
\hline
{\em y} & y coordinate of the point \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+: rotation needed in degree 
\end{DoxyReturn}


Definition at line 85 of file Navigation.\+java.


\begin{DoxyCode}
85                                                      \{
86     \textcolor{keywordtype}{double} dX = x - odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[0];
87     \textcolor{keywordtype}{double} dY = y - odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[1];
88     \textcolor{keywordtype}{double} theta = Math.atan(dX / dY);
89     \textcolor{keywordflow}{if} (dY < 0 && theta < Math.PI)
90       theta += Math.PI;
91     \textcolor{keywordflow}{return} theta;
92   \}
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!convert\+Distance@{convert\+Distance}}
\index{convert\+Distance@{convert\+Distance}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{convert\+Distance()}{convertDistance()}}
{\footnotesize\ttfamily static int ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+convert\+Distance (\begin{DoxyParamCaption}\item[{double}]{radius,  }\item[{double}]{distance }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

This method allows the conversion of a distance to the total rotation of each wheel need to cover that distance.


\begin{DoxyParams}{Parameters}
{\em radius} & The radius of our wheels \\
\hline
{\em distance} & The distance traveled \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A converted distance 
\end{DoxyReturn}


Definition at line 658 of file Navigation.\+java.


\begin{DoxyCode}
658                                                                     \{
659     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) ((180.0 * distance) / (Math.PI * radius));
660   \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!forward@{forward}}
\index{forward@{forward}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{forward()}{forward()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+forward (\begin{DoxyParamCaption}\item[{int}]{speed,  }\item[{double}]{distance }\end{DoxyParamCaption})}

Move the robot forward


\begin{DoxyParams}{Parameters}
{\em speed} & speed to be taken \\
\hline
{\em distance} & distacne to travel \\
\hline
\end{DoxyParams}


Definition at line 629 of file Navigation.\+java.


\begin{DoxyCode}
629                                                   \{
630     leftMotor.setSpeed(speed);
631     rightMotor.setSpeed(speed);
632     \textcolor{keywordflow}{try} \{
633       Thread.sleep(100);
634     \} \textcolor{keywordflow}{catch} (InterruptedException e) \{
635       \textcolor{comment}{// TODO Auto-generated catch block}
636       e.printStackTrace();
637     \}
638     leftMotor.rotate(\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12}{convertDistance}(Game.WHEEL\_RAD, distance * Game.TILE), \textcolor{keyword}{true});
639     rightMotor.rotate(\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12}{convertDistance}(Game.WHEEL\_RAD, distance * Game.TILE), \textcolor{keyword}{false});
640   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4b52e605d3ea2f9bcd9481ae2c69ba39}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4b52e605d3ea2f9bcd9481ae2c69ba39}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!go\+Through\+Tunnel@{go\+Through\+Tunnel}}
\index{go\+Through\+Tunnel@{go\+Through\+Tunnel}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{go\+Through\+Tunnel()}{goThroughTunnel()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+go\+Through\+Tunnel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) throws Exception}

found the tunnel based on the ll and ur coordinate, after the method, the robot will go the the entrance of the tunnel facing the tunnel it returns the distance it needs to go for \mbox{[}x\mbox{]} and \mbox{[}y\mbox{]} in order to go through the tunnel


\begin{DoxyExceptions}{Exceptions}
{\em Exception} & \\
\hline
\end{DoxyExceptions}


Definition at line 397 of file Navigation.\+java.


\begin{DoxyCode}
397                                                  \{
398     \textcolor{keywordtype}{int} distance = 0;
399     \textcolor{keywordtype}{int}[] ll, ur;
400     \textcolor{comment}{// first use ll and ur coordinate to calculate lr and ul of the tunnel}
401     ll = GameParameters.TN\_LL;
402     ur = GameParameters.TN\_UR;
403     \textcolor{keywordtype}{int}[] lr = \{ll[0], ur[1]\};
404     \textcolor{keywordtype}{int}[] ul = \{ur[0], ll[1]\};
405 
406     \textcolor{comment}{// clone the four points (to make sure we are not modifying the original one)}
407     \textcolor{keywordtype}{int}[][] corners = \{ll.clone(), lr.clone(), ul.clone(), ur.clone()\};
408     ArrayList<int[]> notIn = \textcolor{keyword}{new} ArrayList<int[]>();
409     ArrayList<int[]> points = \textcolor{keyword}{new} ArrayList<int[]>();
410     \textcolor{keywordtype}{double}[] position = odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}();
411 
412     \textcolor{comment}{// search for the points that are the same as the current area of the robot}
413     \textcolor{comment}{// these are the entrance of the tunnel, also find the other two points, those}
414     \textcolor{comment}{// are the exit of the tunnel}
415     GameParameters.AreaType type =
416         GameParameters.getType((\textcolor{keywordtype}{int}) Math.round(position[0]), (int) Math.round(position[1]));
417     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int}[] point : corners) \{
418       \textcolor{keywordflow}{if} (GameParameters.getType(point[0], point[1]) == type) \{
419         points.add(point);
420       \} \textcolor{keywordflow}{else} \{
421         notIn.add(point);
422       \}
423     \}
424 
425     \textcolor{comment}{// Sort the two point at exit by the distance to the destination}
426     \textcolor{keywordflow}{if} (type == GameParameters.AreaType.InStarting) \{
427       Collections.sort(notIn, \textcolor{keyword}{new} GameUtil.RingSetComparator());
428     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == GameParameters.AreaType.Searching) \{
429       Collections.sort(notIn, \textcolor{keyword}{new} GameUtil.StartingComparator());
430     \}
431 
432     \textcolor{comment}{// find the direction and length of the tunnel}
433     \textcolor{comment}{// we know the entrance two points of the tunnel, so this means}
434     \textcolor{comment}{// the two points must have either x or y coordinate identical.}
435     \textcolor{comment}{// that's the direction of the tunnel as well}
436     \textcolor{comment}{// after identify it's direction, we find whether it is positive}
437     \textcolor{comment}{// or negative directed}
438     \textcolor{keywordflow}{if} (points.get(0)[0] == points.get(1)[0]) \{
439       distance = Math.abs(notIn.get(0)[0] - points.get(0)[0]);
440       \textcolor{keywordtype}{int} multi = notIn.get(0)[0] - points.get(0)[0] < 0 ? 1 : -1;
441       travelToTunnelEntrance(points, 0, multi);
442       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < notIn.size(); i++) \{
443         \textcolor{comment}{// this step is to find the nearest two points that we can go two}
444         \textcolor{comment}{// after exit the tunnel}
445         notIn.get(i)[0] = notIn.get(i)[0] - multi * 1;
446       \}
447     \} \textcolor{keywordflow}{else} \{
448       distance = Math.abs(notIn.get(0)[1] - points.get(0)[1]);
449       \textcolor{keywordtype}{int} multi = notIn.get(0)[1] - points.get(0)[1] < 0 ? 1 : -1;
450       travelToTunnelEntrance(points, 1, multi);
451       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < notIn.size(); i++) \{
452         \textcolor{comment}{// this step is to find the nearest two points that we can go two}
453         \textcolor{comment}{// after exit the tunnel}
454         notIn.get(i)[1] = notIn.get(i)[1] - multi * 1;
455       \}
456     \}
457 
458     \textcolor{keywordtype}{double}[] tunnelEnd = GameUtil.average(notIn.get(0), notIn.get(1));
459     \textcolor{keywordtype}{double} angleThoughTunnel = Math.toDegrees(\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d}{calculateAngleTo}(tunnelEnd[0], tunnelEnd[1]))
      ;
460     \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c}{turnTo}(angleThoughTunnel);
461 
462     \textcolor{comment}{// goback To correct}
463       moveBackWithCorrection();
464 
465     \textcolor{comment}{// turn left -5 to correct the effect of the weight}
466     \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(TUNNEL\_SPEED, 0.5);
467     \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ad74286ad36d333bfaf57661837457b76}{turn}(TUNNEL\_CORRECTION);
468     \textcolor{keywordflow}{if} (distance == 1) \{
469       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(TUNNEL\_SPEED, distance + 1 );
470     \} \textcolor{keywordflow}{else} \{
471 
472       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(TUNNEL\_SPEED, distance + 1 );
473     \}
474 
475     odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a419b8f07c2c5374411c8e62298e9a402}{setTheta}(angleThoughTunnel);
476     \textcolor{comment}{// leftMotor.setAcceleration(N\_ACCELERATION);}
477     \textcolor{comment}{// rightMotor.setAcceleration(N\_ACCELERATION);}
478     \textcolor{comment}{// // rotate additional sensor distances to make sure the sensor will not on the balck line}
479     \textcolor{comment}{// leftMotor.rotate(convertDistance(Game.WHEEL\_RAD, 2*Game.SEN\_DIS), true);}
480     \textcolor{comment}{// rightMotor.rotate(convertDistance(Game.WHEEL\_RAD, 2*Game.SEN\_DIS), false);}
481     this.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9}{moveOneTileWithCorrection}(angleThoughTunnel);
482     \textcolor{keywordtype}{double}[] after = GameUtil.average(notIn.get(0), notIn.get(1));
483     odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a2911d7215e47f3064defe016b46bfeef}{setX}(after[0]);
484     odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a82986438cd462e66520bc62bb4bd2b75}{setY}(after[1]);
485     \textcolor{comment}{// go to the nearest safe point near tunnel}
486     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int}[] p : notIn) \{
487       \textcolor{keywordflow}{if} (GameUtil.isSafe(p)) \{
488         \textcolor{keywordtype}{double} toPointAngle = Math.toDegrees(\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d}{calculateAngleTo}(p[0], p[1]));
489         \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c}{turnTo}(toPointAngle);
490         this.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9}{moveOneTileWithCorrection}(toPointAngle);
491         odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a2911d7215e47f3064defe016b46bfeef}{setX}(p[0]);
492         odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a82986438cd462e66520bc62bb4bd2b75}{setY}(p[1]);
493         \textcolor{keywordflow}{break};
494       \}
495     \}
496   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4b52e605d3ea2f9bcd9481ae2c69ba39_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4b52e605d3ea2f9bcd9481ae2c69ba39_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!move\+One\+Tile\+With\+Correction@{move\+One\+Tile\+With\+Correction}}
\index{move\+One\+Tile\+With\+Correction@{move\+One\+Tile\+With\+Correction}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{move\+One\+Tile\+With\+Correction()}{moveOneTileWithCorrection()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+move\+One\+Tile\+With\+Correction (\begin{DoxyParamCaption}\item[{double}]{theta }\end{DoxyParamCaption})}

This method move the robot one tile until it detect a blackline (ususally one tile)


\begin{DoxyParams}{Parameters}
{\em theta} & \\
\hline
\end{DoxyParams}


Definition at line 257 of file Navigation.\+java.


\begin{DoxyCode}
257                                                       \{
258     \textcolor{comment}{// leftMotor.setAcceleration(N\_ACCELERATION);}
259     \textcolor{comment}{// rightMotor.setAcceleration(N\_ACCELERATION);}
260     leftMotor.setSpeed(FORWARD\_SPEED);
261     rightMotor.setSpeed(FORWARD\_SPEED);
262     leftMotor.forward();
263     rightMotor.forward();
264     moveUntilLineDetection(\textcolor{keyword}{true});
265     odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a419b8f07c2c5374411c8e62298e9a402}{setTheta}(theta);
266   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a48eeb9ae2da23664421e8da5642054c7}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a48eeb9ae2da23664421e8da5642054c7}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!move\+With\+Correction@{move\+With\+Correction}}
\index{move\+With\+Correction@{move\+With\+Correction}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{move\+With\+Correction()}{moveWithCorrection()}}
{\footnotesize\ttfamily synchronized void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+move\+With\+Correction (\begin{DoxyParamCaption}\item[{double}]{distance,  }\item[{double}]{theta }\end{DoxyParamCaption})}

Move a certain distance with correction along current direction (using coordinate system)


\begin{DoxyParams}{Parameters}
{\em distance} & distance to cover \\
\hline
{\em theta} & theta to be corrected each time \\
\hline
\end{DoxyParams}


Definition at line 228 of file Navigation.\+java.


\begin{DoxyCode}
228                                                                              \{
229     leftMotor.setSpeed(FORWARD\_SPEED);
230     rightMotor.setSpeed(FORWARD\_SPEED);
231 
232     \textcolor{comment}{// correct error of the distance}
233     \textcolor{keywordtype}{int} tiles = Math.abs((\textcolor{keywordtype}{int}) Math.round(distance));
234     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < tiles; i++) \{
235       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_afbe677941e2bd44e35452e1eff508ae9}{moveOneTileWithCorrection}(theta);
236     \}
237   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a48eeb9ae2da23664421e8da5642054c7_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a48eeb9ae2da23664421e8da5642054c7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a1a808e665b8dd5b8e79b0580724d239c}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a1a808e665b8dd5b8e79b0580724d239c}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!search\+Ring\+Set@{search\+Ring\+Set}}
\index{search\+Ring\+Set@{search\+Ring\+Set}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{search\+Ring\+Set()}{searchRingSet()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+search\+Ring\+Set (\begin{DoxyParamCaption}\item[{\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_ring_searcher}{Ring\+Searcher}}]{searcher,  }\item[{boolean}]{correct,  }\item[{boolean}]{reset }\end{DoxyParamCaption})}


\begin{DoxyItemize}
\item this method approaches the ring set by paying attention to the reading of us sensor, stops at the place when the robot can reach the ring
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em searcher} & ring searcher \\
\hline
{\em correct} & whether correct the position when searching ring (cannot do this when at boundary) \\
\hline
{\em reset} & whether reset the rod motor to the original position \\
\hline
\end{DoxyParams}


Definition at line 540 of file Navigation.\+java.


\begin{DoxyCode}
540                                                                                    \{
541     \textcolor{comment}{// Go backward to detect the line and correct the rotation}
542     \textcolor{comment}{// leftMotor.setAcceleration(N\_ACCELERATION);}
543     \textcolor{comment}{// rightMotor.setAcceleration(N\_ACCELERATION);}
544     leftMotor.setSpeed(FORWARD\_SPEED);
545     rightMotor.setSpeed(FORWARD\_SPEED);
546     \textcolor{keywordflow}{try} \{
547       Thread.sleep(100);
548     \} \textcolor{keywordflow}{catch} (InterruptedException e) \{
549       \textcolor{comment}{// TODO Auto-generated catch block}
550       e.printStackTrace();
551     \}
552     \textcolor{keywordtype}{double} theta = odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[2];
553 
554     \textcolor{comment}{// if we do correction, we need to forward more (for the sensor distance)}
555     \textcolor{keywordflow}{if} (correct) \{
556       leftMotor.backward();
557       rightMotor.backward();
558       moveUntilLineDetection(\textcolor{keyword}{true});
559       \textcolor{comment}{// Forward for 3 cm (approach the ring set)}
560       \textcolor{comment}{//forward(FORWARD\_SPEED, 2.5 / Game.TILE);}
561     \} \textcolor{keywordflow}{else} \{
562       \textcolor{comment}{//forward(FORWARD\_SPEED, 2 / Game.TILE);}
563     \}
564     searcher.prepareRetrieve();
565     \textcolor{comment}{// rotate a little to the left to make sure that the sensor can detect the ring}
566     \textcolor{comment}{// detect the ring color and beep based on the color}
567     searcher.search(-165);
568     \textcolor{keywordflow}{if}(correct) \{
569       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(FORWARD\_SPEED, 2.8 / Game.TILE);
570     \}\textcolor{keywordflow}{else} \{
571       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(FORWARD\_SPEED, 3.8 / Game.TILE);
572     \}
573     searcher.detectColor();
574     searcher.search(-190);
575     searcher.detectColor();
576     
577     \textcolor{comment}{// rotate back}
578    \textcolor{comment}{// leftMotor.rotate(-LEFT\_MOTOR\_RING\_COR, false);}
579     \textcolor{comment}{// prepare for retrieving the ring}
580     searcher.finishSearch();
581     
582     rightMotor.rotate(-40, \textcolor{keyword}{false});
583     searcher.safeRod();
584     \textcolor{keywordflow}{if}(correct) \{
585       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(FORWARD\_SPEED, 3.7 / Game.TILE);
586     \}\textcolor{keywordflow}{else} \{
587       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(FORWARD\_SPEED, 2.7 / Game.TILE);
588     \}
589     \textcolor{comment}{// go back to original position}
590     rightMotor.rotate(70, \textcolor{keyword}{false});
591     searcher.retrieveRing();
592     \textcolor{comment}{// rotate the right motor to behind a little to make sure we can put the rod behind the ring}
593     \textcolor{comment}{//rightMotor.rotate(RIGHT\_MOTOR\_RING\_COR, false);}
594 
595     \textcolor{comment}{// go to the position where ring can be retrieved}
596 
597     \textcolor{comment}{// rotate a little to the left to make sure not influence the other ring}
598     rightMotor.rotate(-70, \textcolor{keyword}{false});
599 
600     \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a7c66610c5b7496ddb35d342ab2cd3f08}{forward}(FORWARD\_SPEED, -6.5 / Game.TILE);
601     \textcolor{comment}{// go back to original position}
602     rightMotor.rotate(40+30, \textcolor{keyword}{false});
603 
604 \textcolor{comment}{//    if (correct) \{}
605 \textcolor{comment}{//      forward(FORWARD\_SPEED, -6.5 / Game.TILE);}
606 \textcolor{comment}{//    \} else \{}
607 \textcolor{comment}{//      forward(FORWARD\_SPEED, -6 / Game.TILE);}
608 \textcolor{comment}{//    \}}
609     \textcolor{comment}{//if (reset)}
610       \textcolor{comment}{//searcher.resetRodMotor();}
611   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a1a808e665b8dd5b8e79b0580724d239c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a1a808e665b8dd5b8e79b0580724d239c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ab01db7b8a871acd45e7dd16922abc15e}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ab01db7b8a871acd45e7dd16922abc15e}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!set\+Slow\+Acc@{set\+Slow\+Acc}}
\index{set\+Slow\+Acc@{set\+Slow\+Acc}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{set\+Slow\+Acc()}{setSlowAcc()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+set\+Slow\+Acc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 74 of file Navigation.\+java.


\begin{DoxyCode}
74                            \{
75     leftMotor.setAcceleration(N\_ACCELERATION);
76     rightMotor.setAcceleration(N\_ACCELERATION);
77   \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ab01db7b8a871acd45e7dd16922abc15e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae8530d181ffd790ff9dea5eeab54b1a1}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae8530d181ffd790ff9dea5eeab54b1a1}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!stop@{stop}}
\index{stop@{stop}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Stop the motor 

Definition at line 645 of file Navigation.\+java.


\begin{DoxyCode}
645                      \{
646     leftMotor.stop(\textcolor{keyword}{true});
647     rightMotor.stop(\textcolor{keyword}{false});
648   \}
\end{DoxyCode}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3d8354490a2d8c36090d794c25d33421}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3d8354490a2d8c36090d794c25d33421}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!travel\+To@{travel\+To}}
\index{travel\+To@{travel\+To}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{travel\+To()}{travelTo()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+travel\+To (\begin{DoxyParamCaption}\item[{double}]{x,  }\item[{double}]{y,  }\item[{int}]{speed }\end{DoxyParamCaption})}

Travel to a point naively\+: by rotating the robot facing the point first and then go to the point


\begin{DoxyParams}{Parameters}
{\em x} & x coordinate of the point \\
\hline
{\em y} & y coordinate of the points \\
\hline
\end{DoxyParams}


Definition at line 101 of file Navigation.\+java.


\begin{DoxyCode}
101                                                       \{
102     \textcolor{keywordtype}{double} dX = x - odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[0];
103     \textcolor{keywordtype}{double} dY = y - odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[1];
104     \textcolor{keywordtype}{double} theta = \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a4376e54162df8f123ca3b52e4fd2f38d}{calculateAngleTo}(x, y);
105 
106     \textcolor{comment}{// Euclidean distance calculation.}
107     \textcolor{keywordtype}{double} distance = Math.sqrt(Math.pow(dX, 2) + Math.pow(dY, 2));
108 
109     \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c}{turnTo}(Math.toDegrees(theta));
110     leftMotor.setSpeed(speed);
111     rightMotor.setSpeed(speed);
112     \textcolor{keywordflow}{try} \{
113       Thread.sleep(100);
114     \} \textcolor{keywordflow}{catch} (InterruptedException e) \{
115       \textcolor{comment}{// TODO Auto-generated catch block}
116       e.printStackTrace();
117     \}
118    
119 
120     leftMotor.rotate(\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12}{convertDistance}(Game.WHEEL\_RAD, distance * Game.TILE), \textcolor{keyword}{true});
121     rightMotor.rotate(\hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ac9e260bcd619ffa4820d7d0de7ea1c12}{convertDistance}(Game.WHEEL\_RAD, distance * Game.TILE), \textcolor{keyword}{false});
122     
123   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3d8354490a2d8c36090d794c25d33421_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3d8354490a2d8c36090d794c25d33421_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae7230e905494002087416294f12cae6a}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae7230e905494002087416294f12cae6a}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!travel\+To\+With\+Correction@{travel\+To\+With\+Correction}}
\index{travel\+To\+With\+Correction@{travel\+To\+With\+Correction}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{travel\+To\+With\+Correction()}{travelToWithCorrection()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+travel\+To\+With\+Correction (\begin{DoxyParamCaption}\item[{int}]{x,  }\item[{int}]{y,  }\item[{boolean}]{avoid }\end{DoxyParamCaption})}

This method travel the robot to desired position by following the line (Always rotate 90 degree), along with a correction

When avoid=true, the nav thread will handle traveling. If you want to travel without avoidance, this is also possible. In this case, the method in the \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation}{Navigation} class is used.


\begin{DoxyParams}{Parameters}
{\em x} & The x coordinate to travel to (in cm) \\
\hline
{\em y} & The y coordinate to travel to (in cm) \\
\hline
{\em avoid} & the robot will pay attention to the distance from ultrasonic sensor to avoid abstacle when navigating \\
\hline
\end{DoxyParams}


Definition at line 137 of file Navigation.\+java.


\begin{DoxyCode}
137                                                                   \{
138     \textcolor{keywordtype}{int} px = (int) Math.round(odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[0]);
139     \textcolor{keywordtype}{int} py = (int) Math.round(odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[1]);
140     \textcolor{keywordtype}{int}[] cur = \{px, py\};
141     \textcolor{keywordtype}{int}[] destination = \{x, y\};
142     ArrayList<Character> instruction = \textcolor{keyword}{new} ArrayList<Character>();
143 
144     \textcolor{comment}{// use path finder to find path based on different area the robot is at}
145     \textcolor{comment}{// OUT: instruction: contains a list of instruction for the robot to move to the destination}
146     \textcolor{keywordflow}{if} (GameParameters.getType(px, py) == GameParameters.AreaType.InStarting) \{
147       GameUtil.startingFinder.tryFindPath(cur, destination, instruction);
148     \} \textcolor{keywordflow}{else} \{
149       GameUtil.searchingFinder.tryFindPath(cur, destination, instruction);
150     \}
151 
152     \textcolor{comment}{// use the instruction modified by the pathFind to move to the destination}
153     \textcolor{keywordtype}{char} lastStep = \textcolor{charliteral}{' '};
154     \textcolor{keywordtype}{int} theta = 0;
155 
156     \textcolor{keywordflow}{while} (instruction.size() > 0) \{
157       \textcolor{keywordtype}{char} step = instruction.remove(instruction.size() - 1);
158       \textcolor{comment}{// if the step is different from the last one, rotate to corresponding rotation}
159       \textcolor{keywordflow}{if} (step != lastStep) \{
160         theta = charToRotation(step);
161         \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c}{turnTo}(theta);
162       \}
163 
164       \textcolor{comment}{// add a value to the robot traveled distance}
165       \textcolor{keywordflow}{if} (step == GameUtil.leftInstruction) \{
166         px--;
167       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step == GameUtil.rightInstruction) \{
168         px++;
169       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step == GameUtil.upInstruction) \{
170         py++;
171       \} \textcolor{keywordflow}{else} \{
172         py--;
173       \}
174       lastStep = step;
175 
176       \hyperlink{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a48eeb9ae2da23664421e8da5642054c7}{moveWithCorrection}(1, theta);
177       \textcolor{comment}{// get the position of the robot}
178       \textcolor{keywordtype}{double}[] position = odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}();
179       \textcolor{keywordflow}{if} (Math.round(position[0]) == px && Math.round(position[1]) == py) \{
180         \textcolor{comment}{// this means that the robot is at the point, so set the position to the point}
181         odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a2911d7215e47f3064defe016b46bfeef}{setX}(px);
182         odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a82986438cd462e66520bc62bb4bd2b75}{setY}(py);
183       \} \textcolor{keywordflow}{else} \{
184         \textcolor{comment}{// otherwise some problem might happened and we are not at the desired point, push the}
185         \textcolor{comment}{// instruction back}
186         instruction.add(step);
187         \textcolor{comment}{// reset the added value to last point}
188         \textcolor{keywordflow}{if} (step == GameUtil.leftInstruction) \{
189           px++;
190         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step == GameUtil.rightInstruction) \{
191           px--;
192         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (step == GameUtil.upInstruction) \{
193           py--;
194         \} \textcolor{keywordflow}{else} \{
195           py++;
196         \}
197       \}
198     \}
199   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae7230e905494002087416294f12cae6a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ae7230e905494002087416294f12cae6a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ad74286ad36d333bfaf57661837457b76}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ad74286ad36d333bfaf57661837457b76}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!turn@{turn}}
\index{turn@{turn}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{turn()}{turn()}}
{\footnotesize\ttfamily void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+turn (\begin{DoxyParamCaption}\item[{int}]{angle }\end{DoxyParamCaption})}

Rotate the robot by certain angle


\begin{DoxyParams}{Parameters}
{\em angle} & The angle to rotate our robot to \\
\hline
\end{DoxyParams}


Definition at line 618 of file Navigation.\+java.


\begin{DoxyCode}
618                               \{
619     leftMotor.rotate(convertAngle(Game.WHEEL\_RAD, Game.TRACK, angle), \textcolor{keyword}{true});
620     rightMotor.rotate(-convertAngle(Game.WHEEL\_RAD, Game.TRACK, angle), \textcolor{keyword}{false});
621   \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_ad74286ad36d333bfaf57661837457b76_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c}\label{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c}} 
\index{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}!turn\+To@{turn\+To}}
\index{turn\+To@{turn\+To}!ca\+::mcgill\+::ecse211\+::project\+::\+Navigation@{ca\+::mcgill\+::ecse211\+::project\+::\+Navigation}}
\subsubsection{\texorpdfstring{turn\+To()}{turnTo()}}
{\footnotesize\ttfamily synchronized void ca.\+mcgill.\+ecse211.\+project.\+Navigation.\+turn\+To (\begin{DoxyParamCaption}\item[{double}]{angle }\end{DoxyParamCaption})}

This method is where the logic for the odometer will run. Use the methods provided from the Odometer\+Data class to implement the odometer.


\begin{DoxyParams}{Parameters}
{\em angle} & The angle we want our robot to turn to (in degrees) \\
\hline
{\em async} & whether return instantaneously \\
\hline
\end{DoxyParams}


Definition at line 355 of file Navigation.\+java.


\begin{DoxyCode}
355                                                 \{
356     \textcolor{keywordtype}{double} dTheta;
357 
358     dTheta = angle - odometer.\hyperlink{classca_1_1mcgill_1_1ecse211_1_1odometer_1_1_odometer_data_a8f40f0264c68f0cbed4fff1723ae7863}{getXYT}()[2];
359     \textcolor{keywordflow}{if} (dTheta < 0)
360       dTheta += 360;
361 
362     \textcolor{comment}{// TURN RIGHT}
363     \textcolor{keywordflow}{if} (dTheta > 180) \{
364       leftMotor.setSpeed(ROTATE\_SPEED);
365       rightMotor.setSpeed(ROTATE\_SPEED);
366       \textcolor{keywordflow}{try} \{
367         Thread.sleep(100);
368       \} \textcolor{keywordflow}{catch} (InterruptedException e) \{
369         \textcolor{comment}{// TODO Auto-generated catch block}
370         e.printStackTrace();
371       \}
372       leftMotor.rotate(-convertAngle(Game.WHEEL\_RAD, Game.TRACK, 360 - dTheta), \textcolor{keyword}{true});
373       rightMotor.rotate(convertAngle(Game.WHEEL\_RAD, Game.TRACK, 360 - dTheta), \textcolor{keyword}{false});
374     \}
375     \textcolor{comment}{// TURN LEFT}
376     \textcolor{keywordflow}{else} \{
377       leftMotor.setSpeed(ROTATE\_SPEED);
378       rightMotor.setSpeed(ROTATE\_SPEED);
379       \textcolor{keywordflow}{try} \{
380         Thread.sleep(100);
381       \} \textcolor{keywordflow}{catch} (InterruptedException e) \{
382         \textcolor{comment}{// TODO Auto-generated catch block}
383         e.printStackTrace();
384       \}
385       leftMotor.rotate(convertAngle(Game.WHEEL\_RAD, Game.TRACK, dTheta), \textcolor{keyword}{true});
386       rightMotor.rotate(-convertAngle(Game.WHEEL\_RAD, Game.TRACK, dTheta), \textcolor{keyword}{false});
387     \}
388   \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classca_1_1mcgill_1_1ecse211_1_1project_1_1_navigation_a3bbe0645f2b3b3d0986b4a707fb5a00c_icgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/ccc/\+Final\+Project/src/ca/mcgill/ecse211/project/\hyperlink{_navigation_8java}{Navigation.\+java}\end{DoxyCompactItemize}
